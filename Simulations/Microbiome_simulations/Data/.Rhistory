data_path = "C:/Users/fmelo/Documents/GitHub/Sign_ISN/Simulations/Microbiome_simulations/Data/"
result_path = "C:/Users/fmelo/Documents/GitHub/Sign_ISN/Simulations/Microbiome_simulations/Data/Raw"
setwd(data_path)
direc =  list.dirs(path=".", full.names=TRUE, recursive=FALSE)
direc = direc[grepl("Run", direc, fixed=TRUE)]
directories_no_point = gsub("./", "",direc)
array_res <- array(rep(NA, 972*29*1), dim=c(972,29,1))
optimal_cutoff <- array(rep(NA, 972*29*1), dim=c(972,29,1))
confidence_interval <- array(rep(NA, 972*29*2*1), dim=c(972,29*2,1))
curr_wd = getwd()
for (dir in directories_no_point ){
setwd(dir)
result <- list.files(path=".", pattern="Not_median_res*.",
full.names=TRUE, recursive=FALSE)
conf_int <- list.files(path=".", pattern="Not_median_Conf*.",
full.names=TRUE, recursive=FALSE)
opt_thr <- list.files(path=".", pattern="Not_median_opt*.",
full.names=TRUE, recursive=FALSE)
last_result = result[sapply(result, file.size) == max(sapply(result, file.size))]
last_conf_int = conf_int[sapply(conf_int, file.size) == max(sapply(conf_int, file.size))]
last_opt_thr = opt_thr[sapply(opt_thr, file.size) == max(sapply(opt_thr, file.size))]
Result = readRDS(last_result)
Conf_int = readRDS(last_conf_int)
Opt_thr = readRDS(last_opt_thr)
array_res = abind(array_res, Result, along = 3)
confidence_interval = abind(confidence_interval, Conf_int, along = 3)
optimal_cutoff = abind(optimal_cutoff, Opt_thr, along = 3)
setwd(curr_wd)
}
library(abind)
data_path = "C:/Users/fmelo/Documents/GitHub/Sign_ISN/Simulations/Microbiome_simulations/Data/"
result_path = "C:/Users/fmelo/Documents/GitHub/Sign_ISN/Simulations/Microbiome_simulations/Data/Raw"
setwd(data_path)
direc =  list.dirs(path=".", full.names=TRUE, recursive=FALSE)
direc = direc[grepl("Run", direc, fixed=TRUE)]
directories_no_point = gsub("./", "",direc)
array_res <- array(rep(NA, 972*29*1), dim=c(972,29,1))
optimal_cutoff <- array(rep(NA, 972*29*1), dim=c(972,29,1))
confidence_interval <- array(rep(NA, 972*29*2*1), dim=c(972,29*2,1))
curr_wd = getwd()
for (dir in directories_no_point ){
setwd(dir)
result <- list.files(path=".", pattern="Not_median_res*.",
full.names=TRUE, recursive=FALSE)
conf_int <- list.files(path=".", pattern="Not_median_Conf*.",
full.names=TRUE, recursive=FALSE)
opt_thr <- list.files(path=".", pattern="Not_median_opt*.",
full.names=TRUE, recursive=FALSE)
last_result = result[sapply(result, file.size) == max(sapply(result, file.size))]
last_conf_int = conf_int[sapply(conf_int, file.size) == max(sapply(conf_int, file.size))]
last_opt_thr = opt_thr[sapply(opt_thr, file.size) == max(sapply(opt_thr, file.size))]
Result = readRDS(last_result)
Conf_int = readRDS(last_conf_int)
Opt_thr = readRDS(last_opt_thr)
array_res = abind(array_res, Result, along = 3)
confidence_interval = abind(confidence_interval, Conf_int, along = 3)
optimal_cutoff = abind(optimal_cutoff, Opt_thr, along = 3)
setwd(curr_wd)
}
dim(array_res)
array_res = array(array_res, dim = dim(array_res))
confidence_interval = array(confidence_interval, dim = dim(confidence_interval))
optimal_cutoff = array(optimal_cutoff, dim = dim(optimal_cutoff))
